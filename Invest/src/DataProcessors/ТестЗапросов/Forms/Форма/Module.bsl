
&НаКлиенте
Процедура ЗапроситьСчетаПесочницы(Команда)
	ЗапроситьСчетаПесочницыНаСервере();
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСчетПесочницы(Команда)
	ОткрытьСчетПесочницыНаСервере();
КонецПроцедуры

&НаСервереБезКонтекста
Процедура ОткрытьСчетПесочницыНаСервере()
	
	СтруктураДанных = ОбменДанными.ОткрытьСчетПесочницы();
	
	СтрокаJSON = СтруктураДанных.Данные;
	
	Если СтруктураДанных.ЕстьОшибки Тогда
		Сообщить(СтруктураДанных.ТекстОшибки);
		Возврат
	ИначеЕсли СтрокаJSON = Неопределено Тогда	
		Сообщить("Не определены данные");
		Возврат
	КонецЕсли;	
	
	Данные= РаботаСJSON.ПрочитатьJSONИзСтроки(СтрокаJSON);
	
	НовыйСчет = Справочники.Счета.СоздатьЭлемент();
	НовыйСчет.Владелец = Справочники.СервисыAPI.TinkoffSandbox;
	НовыйСчет.Account_id = Данные.Получить("accountId");
	НовыйСчет.Записать(); 
КонецПроцедуры


&НаСервереБезКонтекста
Процедура ЗапроситьСчетаПесочницыНаСервере()
	
	СтруктураДанных = ОбменДанными.ЗапроситьСчетаПесочницы();
	
КонецПроцедуры

&НаКлиенте
Процедура ЗапроситьВалюты(Команда)
	Данные = ОбменДанными.ЗапроситьВалюты(2);
КонецПроцедуры
